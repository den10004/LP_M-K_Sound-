import"./metrika-CCQzpnmc.js";window.addEventListener("vite:preloadError",e=>{window.reload()});document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(n){n.preventDefault();const t=document.querySelector(this.getAttribute("href"));if(!t)return;const a=t.offsetTop;window.scrollTo({top:a,behavior:"smooth"})})});const g=document.querySelectorAll(".cons-open"),_=document.querySelectorAll(".compilationOpenModal"),f=document.querySelector(".openChoiceModal"),h=document.querySelectorAll(".closeAllModal"),y=document.querySelectorAll(".popup"),S=document.querySelector(".popup-choice"),v=document.querySelector(".popup-consultation"),I=document.querySelector(".popup-compilation");document.body.addEventListener("keydown",function(e){e.key=="Escape"&&u()});function u(){y.forEach(e=>e.style.display="none"),document.body.style.overflow=""}function E(){v.style.display="block"}function w(){S.style.display="block"}function L(e){I.style.display="block";const n=document.querySelector(".modal-title"),t=document.getElementById("titleHiddenConmpilation");t.value=e,n.textContent=`Отправьте заявку и получите подборку акустики для ${e}`}h.forEach(e=>e.addEventListener("click",function(n){u()}));g.forEach(e=>e.addEventListener("click",function(n){const t=n.target.parentNode.parentNode.previousElementSibling.innerHTML,a=document.getElementById("titleHiddenConsultation");a.value=t,E()}));_.forEach(e=>e.addEventListener("click",function(n){const t=n.target.dataset.title;L(t)}));f.addEventListener("click",w);document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("consultForm");m(e)});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("compilationForm");m(e)});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("choiceForm");m(e)});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("helpForm");m(e)});document.addEventListener("DOMContentLoaded",function(){const e=new URL(window.location.href);localStorage.setItem("utm_source",e.searchParams.get("utm_source")),localStorage.setItem("utm_medium",e.searchParams.get("utm_medium")),localStorage.setItem("utm_campaign",e.searchParams.get("utm_campaign")),localStorage.setItem("utm_campaign_name",e.searchParams.get("utm_campaign_name")),localStorage.setItem("utm_content",e.searchParams.get("utm_content")),localStorage.setItem("utm_term",e.searchParams.get("utm_term")),localStorage.setItem("utm_placement",e.searchParams.get("utm_placement")),localStorage.setItem("utm_device",e.searchParams.get("utm_device")),localStorage.setItem("utm_region_name",e.searchParams.get("utm_region_name")),localStorage.setItem("utm_position",e.searchParams.get("utm_position")),localStorage.setItem("utm_position_type",e.searchParams.get("utm_position_type")),localStorage.setItem("utm_source_type",e.searchParams.get("utm_source_type")),localStorage.setItem("yclid",e.searchParams.get("yclid"))});function m(e){e.addEventListener("submit",async function(n){n.preventDefault();try{const t=new FormData(e);let a={};t.append("utm_source",localStorage.getItem("utm_source")),t.append("utm_medium",localStorage.getItem("utm_medium")),t.append("utm_campaign",localStorage.getItem("utm_campaign")),t.append("utm_campaign_name",localStorage.getItem("utm_campaign_name")),t.append("utm_content",localStorage.getItem("utm_content")),t.append("utm_term",localStorage.getItem("utm_term")),t.append("utm_placement",localStorage.getItem("utm_placement")),t.append("utm_device",localStorage.getItem("utm_device")),t.append("utm_region_name",localStorage.getItem("utm_region_name")),t.append("utm_position",localStorage.getItem("utm_position")),t.append("utm_position_type",localStorage.getItem("utm_position_type")),t.append("utm_source_type",localStorage.getItem("utm_source_type")),t.append("yclid",localStorage.getItem("yclid"));const o=await fetch("sendforms.php",{method:"POST",body:t});if(t.forEach((l,s)=>a[s]=l),localStorage.setItem("name",a.name),console.log(a),!o.ok)throw new Error(`Network response was not ok: ${o.status}`);u(),window.location.href="/thanks.html"}catch(t){console.error("Произошла ошибка при отправке формы.",t),alert("Произошла ошибка при отправке формы.",t)}})}new Swiper(".sound__slider",{slidesPerView:5,spaceBetween:65,breakpoints:{320:{slidesPerView:1},400:{slidesPerView:1.5},425:{slidesPerView:2},1300:{slidesPerView:3},1400:{slidesPerView:4,spaceBetween:50},1401:{slidesPerView:5,spaceBetween:65}},navigation:{nextEl:".cardsSlider-button-prev",prevEl:".cardsSlider-button-next"}});document.addEventListener("DOMContentLoaded",function(){let e=!0,n=function(o){let l=o.target,s=l.dataset.phoneClear,i="+7 (___) ___-__-__",r=0,d=i.replace(/\D/g,""),c=o.target.value.replace(/\D/g,"");if(s!=="false"&&o.type==="blur"&&c.length<i.match(/([\_\d])/g).length){o.target.value="";return}d.length>=c.length&&(c=d),o.target.value=i.replace(/./g,function(p){return/[_\d]/.test(p)&&r<c.length?c.charAt(r++):r>=c.length?"":p}),e&&r==2&&o.target.value=="+7 (8"&&(o.target.value="+7 (",e=!1)};const t=async function(o){o.preventDefault();let l=await navigator.clipboard.readText();if(l[0]=="8"){o.target.value="7"+l.substring(1);return}o.target.value=l};let a=document.querySelectorAll("input[type=tel]");for(let o of a){o.addEventListener("paste",t);for(let l of["input","blur","focus"])o.addEventListener(l,n)}});
